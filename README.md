# Домашнее задание ШРИ. CI Сервер.

### Запуск приложения.

Версия Node JS - 14.17.0

Установка необходимых модулей:
```shell script
npm i
```

Запуск сборки и dev-сервера вебпака на порту 8080:
```shell script
npm start
```

В новом терминале - запуск локального сервера на порту 8081:
```shell script
npm run server
```

### Тестирование.

Запуск интеграционных тестов (при запущенном сервере и приложении):
```shell script
# Установка Selenium (необходима также Java и JDK)
npm install selenium-standalone --global
# Результаты тестов в терминале. id (1 или 2) - номер теста (1 по умолчанию)
npm run test:integration:{id}
# Результаты тестов в браузере. id (1 или 2) - номер теста (1 по умолчанию)
npm run test:integration-gui:{id}
```

Запуск юнит-тестов:
```shell script
npm test:unit
```

Поскольку в приложении очень сильная связка фронтенда и бэкенда, было принято решение сконцентрироваться на интеграционном тестировании с использованием hermione.

Так как возможны два основных состояния приложения - с указанными настройками репозитория и без них - реализованы два отдельных набора тестов для каждого состояния.

#### Набор интеграционных тестов 1.

С помощью интеграционных тестов проверяется продуктовый сценарий открытия модального окна для запуска сборки. Проверяется переход со страницы всех сборок, на страницу конкретной сборки, тестируется переход на страницу изменения настроек. На странице настроек покрыто тестами возвращение на главную.

Для всех страниц скриншотами проверяется правильность отображения хедера, футера и основного контента.

#### Набор интеграционных тестов 2.

Проверка корректности работы стартовой страницы без указанных настроек репозитория. Тестируется переход двумя способами на страницу с вводом настроек, а также правильность отображения хедера, футера и основного контента.

#### Модульное тестирование.

С помощью юнит-тестов проверяются чистые функции - преобразование даты и длительности в необходимый формат вывода.

### Мониторинг производительности.

Для просмотра примера отчёта по метрикам сайта:

- Запустить приложение по инструкции выше
- Открыть [страницу с примерами отчётов](http://localhost:8080/analytics)
- Можно добавить хитов для любой из метрик, совершив соответствующие действия, и увидеть изменения в отчёте. Например, обновить настройки на странице /settings, открыть модальное окно на странице /builds-list и т.д.

Можно не запускать приложение и просто посмотреть [страницу с отчётами](https://yurydemidov.github.io/yandex-shri__performance/dist/analytics) на Github Pages.
